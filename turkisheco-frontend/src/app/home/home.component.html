<div class="state" *ngIf="isLoading">Yükleniyor...</div>
<div class="state state-error" *ngIf="error">{{ error }}</div>

<main *ngIf="!isLoading && !error">
  <div class="featured-grid" *ngIf="posts.length > 0; else noPosts">
    <a
      class="card card-large"
      [routerLink]="['/posts', posts[0].slug]"
    >
      <div class="author">
        <div class="avatar"></div>
        <span>{{ posts[0].authorName }}</span>
      </div>
      <h2>{{ posts[0].title }}</h2>
      <p>{{ posts[0].contentMarkdown | slice:0:220 }}{{ posts[0].contentMarkdown.length > 220 ? '…' : '' }}</p>
      <span class="read-btn">
        Read Article →
      </span>
    </a>

    <a
      class="card card-small"
      *ngIf="posts.length > 1"
      [routerLink]="['/posts', posts[1].slug]"
    >
      <h2>{{ posts[1].title }}</h2>
      <p>{{ posts[1].contentMarkdown | slice:0:140 }}{{ posts[1].contentMarkdown.length > 140 ? '…' : '' }}</p>
    </a>

    <a
      class="card card-small"
      *ngIf="posts.length > 2"
      [routerLink]="['/posts', posts[2].slug]"
    >
      <h2>{{ posts[2].title }}</h2>
      <p>{{ posts[2].contentMarkdown | slice:0:140 }}{{ posts[2].contentMarkdown.length > 140 ? '…' : '' }}</p>
    </a>
  </div>

  <ng-template #noPosts>
    <div class="state">Henüz blog yazısı yok.</div>
  </ng-template>

  <div class="section-header" *ngIf="posts.length > 3">
    <h3>Recent Blog Posts</h3>
    <button class="view-all-btn" routerLink="/admin/posts">Tüm Yazılar</button>
  </div>

  <div class="blog-grid" *ngIf="posts.length > 3">
    <a
      class="blog-card"
      *ngFor="let post of posts | slice:3"
      [routerLink]="['/posts', post.slug]"
    >
      <div class="blog-image">
        <div class="blog-author">
          <div class="avatar"></div>
          <span>{{ post.authorName }}</span>
        </div>
      </div>
      <div class="blog-content">
        <div class="blog-date">{{ post.createdAt | date: 'longDate' }}</div>
        <h4>{{ post.title }}</h4>
        <p>{{ post.contentMarkdown | slice:0:160 }}{{ post.contentMarkdown.length > 160 ? '…' : '' }}</p>
        <span class="blog-read-btn">Read Article →</span>
      </div>
    </a>
  </div>
</main>
